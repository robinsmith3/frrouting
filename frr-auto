# Start with a base image
FROM frrouting/frr:latest

# Set metadata
#LABEL maintainer="robinsmith3@gmail.com"
#LABEL version="1.13"
#LABEL description="Custom Free Range Routing image"

# Set working directory
WORKDIR /etc/frr

# create zebra dir
RUN mkdir /etc/frr/zebra
RUN cd /etc/frr/zebra

# Copy local files to container
COPY daemons /etc/frr/zebra

# Create routing daemon config files
RUN touch /etc/frr/zebra/bgpd.conf /etc/frr/zebra/isisd.conf /etc/frr/zebra/zebra.conf

# Set perms on those files
RUN chown frr:frr /etc/frr/zebra/bgpd.conf /etc/frr/zebra/isisd.conf /etc/frr/zebra/zebra.conf
RUN chmod 644 /etc/frr/zebra/bgpd.conf /etc/frr/zebra/isisd.conf /etc/frr/zebra/zebra.conf

# Command to run when container starts
#CMD /usr/lib/frr/frrinit.sh start zebra bgpd isisd
#CMD ["/usr/lib/frr/frrinit.sh", "start", "zebra", "bgpd", "isisd"]
#CMD ["/usr/lib/frr/watchfrr.sh -d zebra bgpd isis"]
